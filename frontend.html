<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–±–º–µ–Ω –≤–∞–ª—é—Ç - –¢–µ—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; background: rgba(255, 255, 255, 0.95); border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; backdrop-filter: blur(10px); }
        .header { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; font-weight: 300; }
        .header p { opacity: 0.9; font-size: 1.1em; }
        .content { padding: 30px; }
        .section { background: white; margin: 20px 0; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); border-left: 4px solid #667eea; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .section:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .section h2 { color: #667eea; margin-bottom: 20px; font-size: 1.8em; font-weight: 500; }
        .form-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .form-control { display: flex; flex-direction: column; }
        .form-control label { margin-bottom: 8px; font-weight: 500; color: #555; }
        .form-control input, .form-control select { padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; transition: border-color 0.3s ease; }
        .form-control input:focus, .form-control select:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        .btn { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 12px 30px; border-radius: 25px; font-size: 16px; font-weight: 500; cursor: pointer; transition: all 0.3s ease; margin: 5px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3); }
        .btn:active { transform: translateY(0); }
        .btn-secondary { background: linear-gradient(135deg, #6c757d, #495057); }
        .response { background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-top: 20px; font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; white-space: pre-wrap; overflow-x: auto; min-height: 60px; transition: all 0.3s ease; }
        .response.success { border-color: #28a745; background: #d4edda; }
        .response.error { border-color: #dc3545; background: #f8d7da; }
        .status-indicator { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 14px; font-weight: 500; margin-bottom: 10px; }
        .status-success { background: #28a745; color: white; }
        .status-error { background: #dc3545; color: white; }
        .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%; animation: spin 1s linear infinite; margin-right: 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
        .server-status { position: fixed; top: 20px; right: 20px; padding: 10px 20px; border-radius: 25px; font-weight: 500; z-index: 1000; transition: all 0.3s ease; }
        .server-online { background: #28a745; color: white; }
        .server-offline { background: #dc3545; color: white; }
        @media (max-width: 768px) { .form-group { grid-template-columns: 1fr; } .grid { grid-template-columns: 1fr; } .header h1 { font-size: 2em; } }
    </style>
</head>
<body>
    <div class="server-status" id="serverStatus">–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞...</div>
    
    <div class="container">
        <div class="header">
            <h1>üí± –û–±–º–µ–Ω –≤–∞–ª—é—Ç</h1>
            <p>–¢–µ—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è REST API</p>
        </div>

        <div class="content">
            <div class="grid">
                <!-- –°–µ–∫—Ü–∏—è –≤–∞–ª—é—Ç -->
                <div class="section">
                    <h2>üí∞ –í–∞–ª—é—Ç—ã</h2>
                    
                    <div class="form-group">
                        <button class="btn" onclick="getCurrencies()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–∞–ª—é—Ç—ã</button>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-control">
                            <label for="currencyCode">–ü–æ–ª—É—á–∏—Ç—å –≤–∞–ª—é—Ç—É –ø–æ –∫–æ–¥—É:</label>
                            <input type="text" id="currencyCode" placeholder="USD" maxlength="3">
                        </div>
                        <div class="form-control">
                            <button class="btn" onclick="getCurrency()">–ü–æ–ª—É—á–∏—Ç—å –≤–∞–ª—é—Ç—É</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-control">
                            <label for="newCurrencyCode">–ö–æ–¥ –Ω–æ–≤–æ–π –≤–∞–ª—é—Ç—ã:</label>
                            <input type="text" id="newCurrencyCode" placeholder="EUR" maxlength="3">
                        </div>
                        <div class="form-control">
                            <label for="newCurrencyName">–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞–ª—é—Ç—ã:</label>
                            <input type="text" id="newCurrencyName" placeholder="–ï–≤—Ä–æ">
                        </div>
                        <div class="form-control">
                            <label for="newCurrencySign">–ó–Ω–∞–∫ –≤–∞–ª—é—Ç—ã:</label>
                            <input type="text" id="newCurrencySign" placeholder="‚Ç¨" maxlength="5">
                        </div>
                    </div>
                    <button class="btn" onclick="addCurrency()">–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª—é—Ç—É</button>
                    
                    <div class="response" id="currencyResponse">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</div>
                </div>

                <!-- –°–µ–∫—Ü–∏—è –æ–±–º–µ–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ -->
                <div class="section">
                    <h2>üìà –û–±–º–µ–Ω–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
                    
                    <div class="form-group">
                        <button class="btn" onclick="getExchangeRates()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã</button>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-control">
                            <label for="baseCurrency">–ë–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞:</label>
                            <input type="text" id="baseCurrency" placeholder="USD" maxlength="3">
                        </div>
                        <div class="form-control">
                            <label for="targetCurrency">–¶–µ–ª–µ–≤–∞—è –≤–∞–ª—é—Ç–∞:</label>
                            <input type="text" id="targetCurrency" placeholder="EUR" maxlength="3">
                        </div>
                        <div class="form-control">
                            <button class="btn" onclick="getExchangeRate()">–ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-control">
                            <label for="addBaseCurrency">–ë–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞:</label>
                            <input type="text" id="addBaseCurrency" placeholder="USD" maxlength="3">
                        </div>
                        <div class="form-control">
                            <label for="addTargetCurrency">–¶–µ–ª–µ–≤–∞—è –≤–∞–ª—é—Ç–∞:</label>
                            <input type="text" id="addTargetCurrency" placeholder="EUR" maxlength="3">
                        </div>
                        <div class="form-control">
                            <label for="exchangeRateValue">–ö—É—Ä—Å –æ–±–º–µ–Ω–∞:</label>
                            <input type="number" id="exchangeRateValue" placeholder="0.85" step="0.000001">
                        </div>
                    </div>
                    <button class="btn" onclick="addExchangeRate()">–î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å</button>
                    
                    <div class="form-group">
                        <div class="form-control">
                            <label for="updateBaseCurrency">–ë–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞:</label>
                            <input type="text" id="updateBaseCurrency" placeholder="USD" maxlength="3">
                        </div>
                        <div class="form-control">
                            <label for="updateTargetCurrency">–¶–µ–ª–µ–≤–∞—è –≤–∞–ª—é—Ç–∞:</label>
                            <input type="text" id="updateTargetCurrency" placeholder="EUR" maxlength="3">
                        </div>
                        <div class="form-control">
                            <label for="updateExchangeRateValue">–ù–æ–≤—ã–π –∫—É—Ä—Å:</label>
                            <input type="number" id="updateExchangeRateValue" placeholder="0.90" step="0.000001">
                        </div>
                    </div>
                    <button class="btn" onclick="updateExchangeRate()">–û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å</button>
                    
                    <div class="response" id="exchangeRateResponse">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</div>
                </div>

                <!-- –°–µ–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞ -->
                <div class="section">
                    <h2>üîÑ –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤–∞–ª—é—Ç</h2>
                    
                    <div class="form-group">
                        <div class="form-control">
                            <label for="convertFromSelect">–ò–∑ –≤–∞–ª—é—Ç—ã:</label>
                            <select id="convertFromSelect">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <label for="convertToSelect">–í –≤–∞–ª—é—Ç—É:</label>
                            <select id="convertToSelect">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>
                            </select>
                        </div>
                        <div class="form-control">
                            <label for="convertAmount">–°—É–º–º–∞:</label>
                            <input type="number" id="convertAmount" placeholder="100" step="0.01">
                        </div>
                    </div>
                    <button class="btn" onclick="convertCurrency()">–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    
                    <div class="response" id="convertResponse">–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'your url';

        function showResponse(elementId, data, isError = false) {
            const element = document.getElementById(elementId);
            element.textContent = JSON.stringify(data, null, 2);
            element.className = isError ? 'response error' : 'response success';
        }

        function showLoading(elementId) {
            const element = document.getElementById(elementId);
            element.innerHTML = '<div class="loading"></div>–ó–∞–≥—Ä—É–∑–∫–∞...';
            element.className = 'response';
        }

        async function checkServerStatus() {
            const statusElement = document.getElementById('serverStatus');
            try {
                const response = await fetch(`${API_BASE_URL}/currencies`, { method: 'GET' });
                if (response.ok) {
                    statusElement.textContent = '–°–µ—Ä–≤–µ—Ä –æ–Ω–ª–∞–π–Ω';
                    statusElement.className = 'server-status server-online';
                } else {
                    throw new Error('Server responded with error');
                }
            } catch (error) {
                statusElement.textContent = '–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
                statusElement.className = 'server-status server-offline';
            }
        }

        // –í–∞–ª—é—Ç—ã
        async function getCurrencies() {
            showLoading('currencyResponse');
            try {
                const response = await fetch(`${API_BASE_URL}/currencies`);
                const data = await response.json();
                showResponse('currencyResponse', data, !response.ok);
                if (response.ok) {
                    updateCurrencySelects(data);
                }
            } catch (error) {
                showResponse('currencyResponse', { error: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message }, true);
            }
        }

        async function getCurrency() {
            const code = document.getElementById('currencyCode').value.trim().toUpperCase();
            if (!code) {
                showResponse('currencyResponse', { error: '–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –≤–∞–ª—é—Ç—ã' }, true);
                return;
            }
            
            showLoading('currencyResponse');
            try {
                const response = await fetch(`${API_BASE_URL}/currency/${code}`);
                const data = await response.json();
                showResponse('currencyResponse', data, !response.ok);
            } catch (error) {
                showResponse('currencyResponse', { error: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message }, true);
            }
        }

        async function addCurrency() {
            const code = document.getElementById('newCurrencyCode').value.trim().toUpperCase();
            const name = document.getElementById('newCurrencyName').value.trim();
            const sign = document.getElementById('newCurrencySign').value.trim();
            
            if (!code || !name || !sign) {
                showResponse('currencyResponse', { error: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è' }, true);
                return;
            }
            
            showLoading('currencyResponse');
            try {
                const response = await fetch(`${API_BASE_URL}/currencies`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ code, name, sign })
                });
                const data = await response.json();
                showResponse('currencyResponse', data, !response.ok);
                
                if (response.ok) {
                    document.getElementById('newCurrencyCode').value = '';
                    document.getElementById('newCurrencyName').value = '';
                    document.getElementById('newCurrencySign').value = '';
                }
            } catch (error) {
                showResponse('currencyResponse', { error: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message }, true);
            }
        }

        // –û–±–º–µ–Ω–Ω—ã–µ –∫—É—Ä—Å—ã
        async function getExchangeRates() {
            showLoading('exchangeRateResponse');
            try {
                const response = await fetch(`${API_BASE_URL}/exchangeRates`);
                const data = await response.json();
                showResponse('exchangeRateResponse', data, !response.ok);
            } catch (error) {
                showResponse('exchangeRateResponse', { error: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message }, true);
            }
        }

        async function getExchangeRate() {
            const baseCode = document.getElementById('baseCurrency').value.trim().toUpperCase();
            const targetCode = document.getElementById('targetCurrency').value.trim().toUpperCase();
            
            if (!baseCode || !targetCode) {
                showResponse('exchangeRateResponse', { error: '–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥—ã –≤–∞–ª—é—Ç' }, true);
                return;
            }
            
            showLoading('exchangeRateResponse');
            try {
                const response = await fetch(`${API_BASE_URL}/exchangeRate/${baseCode}${targetCode}`);
                const data = await response.json();
                showResponse('exchangeRateResponse', data, !response.ok);
            } catch (error) {
                showResponse('exchangeRateResponse', { error: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message }, true);
            }
        }

        async function addExchangeRate() {
            const baseCurrencyCode = document.getElementById('addBaseCurrency').value.trim().toUpperCase();
            const targetCurrencyCode = document.getElementById('addTargetCurrency').value.trim().toUpperCase();
            const rate = parseFloat(document.getElementById('exchangeRateValue').value);
            
            if (!baseCurrencyCode || !targetCurrencyCode || isNaN(rate) || rate <= 0) {
                showResponse('exchangeRateResponse', { error: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ' }, true);
                return;
            }
            
            showLoading('exchangeRateResponse');
            try {
                const response = await fetch(`${API_BASE_URL}/exchangeRates`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ baseCurrencyCode, targetCurrencyCode, rate })
                });
                const data = await response.json();
                showResponse('exchangeRateResponse', data, !response.ok);
                
                if (response.ok) {
                    document.getElementById('addBaseCurrency').value = '';
                    document.getElementById('addTargetCurrency').value = '';
                    document.getElementById('exchangeRateValue').value = '';
                }
            } catch (error) {
                showResponse('exchangeRateResponse', { error: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message }, true);
            }
        }

        async function updateExchangeRate() {
            const baseCode = document.getElementById('updateBaseCurrency').value.trim().toUpperCase();
            const targetCode = document.getElementById('updateTargetCurrency').value.trim().toUpperCase();
            const rate = parseFloat(document.getElementById('updateExchangeRateValue').value);
            
            if (!baseCode || !targetCode || isNaN(rate) || rate <= 0) {
                showResponse('exchangeRateResponse', { error: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ' }, true);
                return;
            }
            
            showLoading('exchangeRateResponse');
            try {
                const response = await fetch(`${API_BASE_URL}/exchangeRate/${baseCode}${targetCode}`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ rate })
                });
                const data = await response.json();
                showResponse('exchangeRateResponse', data, !response.ok);
                
                if (response.ok) {
                    document.getElementById('updateBaseCurrency').value = '';
                    document.getElementById('updateTargetCurrency').value = '';
                    document.getElementById('updateExchangeRateValue').value = '';
                }
            } catch (error) {
                showResponse('exchangeRateResponse', { error: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message }, true);
            }
        }

        // –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä
        async function convertCurrency() {
            const fromCode = document.getElementById('convertFromSelect').value;
            const toCode = document.getElementById('convertToSelect').value;
            const amount = parseFloat(document.getElementById('convertAmount').value);
            
            if (!fromCode || !toCode || isNaN(amount) || amount <= 0) {
                showResponse('convertResponse', { error: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ' }, true);
                return;
            }
            
            showLoading('convertResponse');
            try {
                const response = await fetch(`${API_BASE_URL}/exchange?from=${fromCode}&to=${toCode}&amount=${amount}`);
                const data = await response.json();
                showResponse('convertResponse', data, !response.ok);
            } catch (error) {
                showResponse('convertResponse', { error: '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message }, true);
            }
        }

        function updateCurrencySelects(currencies) {
            const fromSelect = document.getElementById('convertFromSelect');
            const toSelect = document.getElementById('convertToSelect');
            
            // –û—á–∏—â–∞–µ–º —Å–µ–ª–µ–∫—Ç—ã
            fromSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>';
            toSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>';
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–µ–ª–µ–∫—Ç—ã –≤–∞–ª—é—Ç–∞–º–∏
            if (Array.isArray(currencies)) {
                currencies.forEach(currency => {
                    const option1 = new Option(`${currency.code} - ${currency.name}`, currency.code);
                    const option2 = new Option(`${currency.code} - ${currency.name}`, currency.code);
                    fromSelect.add(option1);
                    toSelect.add(option2);
                });
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            checkServerStatus();
            getCurrencies();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(checkServerStatus, 30000);
        });
    </script>
</body>
</html>
